#デジカメを作る
#Lチカ回路を作ってLED点灯中はカメラを起動
#LEDがonからoffにかわる瞬間に撮影
#また、撮影データは人がいるかどうかの画像認識も行う

#関数一つ目（画像の処理）
   
    #画像認識させる（自動）
    #人がいた場合（40%以上）ファイルAへ
    #人がいなかった場合ファイルBへ

#関数二つ目
#Lチカ回路の動作プログラム
'''
import RPi.GPIO as GPIO
from time import sleep

GPIO.setmode (GPIO.BCM)
GPIO.setup (17, GPIO.IN, pull_up_down=GPIO.PUD_UP)
GPIO.setup (3, GPIO.OUT)
GPIO.output (3, False)

while True:
   GPIO.wait_for_edge (17, GPIO.FALLING)
   sw_counter = 0
   while True:
      sw_status = GPIO.input (17)
      if sw_status == 0:
      sw_counter = sw_counter + 1
      if sw_counter >= 10000:
      GPIO.output (3, True)
      break
   GPIO.output (3, False)
   else:
      break
time.sleep (0.01)
GPIO.cleanup ()
'''
 #画像撮影（撮影データは撮影データファイルへ）

 import signal
            import buttonshim
            import sys
            import time
            import picamera
            
            BUTTONS = [buttonshim.BUTTON_A, buttonshim.BUTTON_B, buttonshim.BUTTON_C, buttonshim.BUTTON_D, buttonshim.BUTTON_E]
            
            # ボタンを押されたときに呼び出されるように設定する
            @buttonshim.on_press(BUTTONS)
            def button_p_handler(button, pressed):
                # Aボタンを押されたとき
                if (button == 0):
                    # カメラ初期化
                    with picamera.PiCamera() as camera:
                        # 解像度の設定
                        camera.resolution = (1024, 768)
                        # 撮影の準備
                        camera.start_preview()
                        # 準備している間、少し待機する
                        time.sleep(2)
                        # 撮影して指定したファイル名で保存する
                        camera.capture('my_pic.jpg')
                        print('Camera End!')
            
            signal.pause()            
    




#main関数
#関数二つ目実行
#関数一つ目実行
#終了
